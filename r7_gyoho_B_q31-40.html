<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>宅建 公式過去問（令和7年）問1〜問4（B：日常訳あり／白背景）</title>
  <style>
    :root{
      /* ===== 白背景（ライト）版 ===== */
      --bg:#ffffff;
      --card:#ffffff;
      --card2:#f7f8fb;
      --text:#0b0f14;
      --muted:#556274;
      --line:#d7dde6;
      --ok:#16a34a;
      --ng:#e11d48;
      --btn:#f3f4f6;
      --btn2:#e5e7eb;
      --accent:#2563eb;
      --warn:#b45309;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Hiragino Kaku Gothic ProN", "Noto Sans JP", "Yu Gothic", sans-serif;
      background:#ffffff; /* 背景は白固定 */
      color:var(--text);
    }
    header{
      padding:24px 16px 12px;
      max-width:1100px;
      margin:0 auto;
    }
    h1{
      margin:0 0 6px;
      font-size:20px;
      letter-spacing:.02em;
    }
    .sub{
      margin:0;
      color:var(--muted);
      font-size:13px;
      line-height:1.5;
    }
    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:12px 16px 36px;
    }
    .panel{
      background:rgba(255,255,255,.92);
      border:1px solid var(--line);
      border-radius:14px;
      padding:14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      position:sticky;
      top:0;
      backdrop-filter: blur(10px);
      z-index:10;
    }
    button{
      border:1px solid var(--line);
      background:var(--btn);
      color:var(--text);
      padding:10px 12px;
      border-radius:12px;
      cursor:pointer;
      font-weight:700;
      font-size:13px;
    }
    button:hover{ border-color:#9fb3d9; }
    button.primary{ background:#eef2ff; border-color:#2563eb; }
    button.danger{ background:#fff1f2; border-color:#e11d48; color:#9f1239;}
    button.ghost{ background:transparent; }
    .stat{
      margin-left:auto;
      display:flex;
      gap:12px;
      align-items:baseline;
      flex-wrap:wrap;
    }
    .stat b{font-size:14px}
    .stat span{color:var(--muted); font-size:13px}
    .note{
      width:100%;
      color:var(--muted);
      font-size:12px;
      line-height:1.6;
      margin-top:4px;
    }

    .restore{
      margin-top:12px;
      background:rgba(255,255,255,.9);
      border:1px dashed #9fb3d9;
      border-radius:14px;
      padding:12px;
    }
    .restore label{
      display:block;
      font-weight:700;
      font-size:13px;
      margin-bottom:6px;
    }
    textarea{
      width:100%;
      min-height:90px;
      resize:vertical;
      border-radius:12px;
      border:1px solid var(--line);
      background:#ffffff;
      color:var(--text);
      padding:10px;
      font-size:13px;
      line-height:1.5;
      outline:none;
    }
    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:14px;
      margin-top:14px;
    }
    @media (max-width:980px){
      .grid{ grid-template-columns:1fr; }
      .stat{ margin-left:0; width:100%;}
    }
    .qcard{
      background:rgba(255,255,255,.95);
      border:1px solid var(--line);
      border-radius:16px;
      padding:14px;
    }
    .qhead{
      display:flex;
      justify-content:space-between;
      gap:10px;
      align-items:flex-start;
      margin-bottom:10px;
    }
    .qid{
      font-weight:900;
      letter-spacing:.02em;
    }
    .tag{
      font-size:12px;
      padding:5px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      color:var(--muted);
      background:rgba(0,0,0,.02);
      white-space:nowrap;
    }
    .blocktitle{
      margin:10px 0 6px;
      font-size:12px;
      color:var(--muted);
      letter-spacing:.04em;
    }
    .box{
      border:1px solid var(--line);
      border-radius:14px;
      padding:10px 12px;
      background:rgba(0,0,0,.02);
      line-height:1.65;
      font-size:13px;
    }
    .choices{
      margin-top:10px;
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .choice{
      border:1px solid var(--line);
      border-radius:14px;
      padding:10px 12px;
      background:rgba(0,0,0,.01);
      display:flex;
      gap:10px;
      align-items:flex-start;
      cursor:pointer;
    }
    .choice:hover{ border-color:#9fb3d9; }
    .choice input{ margin-top:3px; transform:scale(1.1); }
    .choice .cbody{ flex:1; }
    .choice .clabel{ font-weight:900; margin-right:8px; color:#1d4ed8; }
    .result{
      margin-top:10px;
      border-radius:14px;
      padding:10px 12px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.02);
      display:none;
    }
    .result.ok{ border-color:rgba(22,163,74,.55); background:rgba(22,163,74,.08); }
    .result.ng{ border-color:rgba(225,29,72,.55); background:rgba(225,29,72,.06); }
    .result .line1{ font-weight:900; margin-bottom:6px; }
    .result .small{ color:var(--muted); font-size:12px; line-height:1.6; }
    .muted{ color:var(--muted); }
    .pill{
      display:inline-block;
      padding:3px 8px;
      border-radius:999px;
      border:1px solid var(--line);
      font-size:12px;
      color:var(--muted);
      margin-left:8px;
      background:rgba(0,0,0,.01);
    }
    .warn{
      color:var(--warn);
      font-weight:800;
    }
    .foot{
      margin-top:18px;
      color:var(--muted);
      font-size:12px;
      line-height:1.6;
    }
  </style>
</head>
<body>
  <header>
    <h1>宅建 公式過去問（令和7年）問1〜問4（B：日常訳あり／白背景）</h1>
    <p class="sub">
      表示順は固定：問題文（試験風）→ 日常の言い換え → 選択肢。<br/>
      1問1択。採点後にだけ「正解＋ピンポイント解説」を表示。<br/>
      「回答をコピー」→ 文字列をメモ → 消えても「回答を貼って復元」で戻せます。端末内保存（localStorage）対応。
    </p>
  </header>

  <div class="wrap">
    <div class="panel">
      <button class="primary" id="btnScore">採点する</button>
      <button class="ghost" id="btnShowExp">解説を表示</button>
      <button class="ghost" id="btnCopy">回答をコピー</button>
      <button class="ghost" id="btnSave">回答を保存</button>
      <button class="ghost" id="btnRestore">回答を貼って復元</button>
      <button class="danger" id="btnReset">リセット</button>

      <div class="stat">
        <b id="statText">合計：4問中 0 正解（未採点）</b>
        <span id="statSub">未回答：4 / 4</span>
      </div>

      <div class="note">
        ※解説は「採点」後にだけ表示されます。<br/>
        ※「保存」はこの端末のブラウザ内です（ログイン不要・他端末には移りません）。
      </div>
    </div>

    <div class="restore">
      <label>復元用（必要なときだけ）</label>
      <textarea id="restoreBox" placeholder="ここに『回答をコピー』で出た文字列を貼ってから『回答を貼って復元』"></textarea>
      <div class="foot">※この欄は普段は使いません（事故の保険）。</div>
    </div>

    <div class="grid" id="qGrid"></div>

    <div class="foot">
      注意：このセットは「公式過去問（令和7年）問1〜問4／B（日常訳あり）」のサンプルです。<br/>
      A運用にするときは、daily を空文字（""）にして同じ形のまま回します（UIはいじらない前提）。
    </div>
  </div>

<script>
(function(){
  // ====== 問題データ ======
  // ルール：Bは「日常訳あり（必須）」＋「専門用語は直後に（）で日本語言い換え」
  
  const questions = [
  {
    id: 31,
    question:
      "【問31】次の記述のうち、宅地建物取引業法（宅建業法：不動産屋のルール）により禁止されている行為が含まれているものはいくつあるか。\nア　宅地建物取引士（宅建士：重要事項説明などをする資格者）が、マンション販売の勧誘（営業の声かけ）を電話で行うにあたり、まず、契約締結について勧誘する目的である旨を告げたうえで、自分の名前は名乗らず、自身の勤務する宅地建物取引業者（不動産会社）の名称及び免許番号を伝えたうえで勧誘を行った。\nイ　宅地建物取引業者（不動産会社）が、賃貸マンションの媒介（仲介）で入居申込者から申込みを受け付けたところ、当該マンションのオーナーからの審査回答待ちとなった。その後、入居申込者が、申込みを撤回したい旨電話で伝えたところ、当該宅地建物取引業者の従業員から声を荒げ「撤回をするなら、とりあえず事務所まで来てくれないと困る」と怒鳴られ、面会を強要された。申込者はその言動に不安を覚えたため、事務所に赴いて、申込みの撤回を申し出たところ、申込みの撤回が了承された。\nウ　宅地建物取引業者（不動産会社）が、一時的にアルバイトを雇って、マンション販売の広告チラシの配布を行わせることとしたほか、契約書の作成業務も補助的に行わせるため、従業者証明書（従業員証・携帯義務があるカード）をその者に発行し、それらの業務を行わせた。ただし、そのアルバイトはマンション販売の広告チラシの配布の際には、従業者証明書を携帯していなかった。\nエ　マンションの販売の勧誘における説明において、宅地建物取引士（宅建士）が、日当たりのよいマンションの購入希望者に対して、「マンション南側の月極駐車場は出来たばかりであり、将来にわたりそこにマンションなどの高層の建物が建つ予定は全くない」と説明し、購入希望者から購入申込みを受け付けた。",
    everyday:
      "4つの話（ア〜エ）の中に、「宅建業法でやったらアカン（禁止）」が何個入ってるかを数える問題です。",
    options: ["1　一つ", "2　二つ", "3　三つ", "4　四つ"],
    answer: 4,
    explanation:
      "結論：禁止が4つ＝全部アウト。\n判断軸（何でアウトか）：\nア：電話勧誘は『氏名（名乗り）』＋『相手が勧誘と分かる説明』が必要。名乗らないのはNG。\nイ：申込み撤回の場面で、怒鳴って来所を強要＝威迫（おどし）・困惑させる行為でNG。\nウ：チラシ配りも業務で従業者証明書の携帯提示が必要な場面がある。携帯していないのは違反（携帯義務違反）でNG。\nエ：将来の建築予定を『絶対建たない』と断言＝断定的判断の提供（断言して誤認させる）でNG。"
  },

  {
    id: 32,
    question:
      "【問32】宅地建物取引業者A（不動産会社A）が、自ら売主として、宅地建物取引業者ではないB（一般の買主）との間でマンション（代金4,000万円）の売買契約を締結した場合に関する次の記述のうち、宅地建物取引業法（宅建業法：不動産屋のルール）（以下この問において「法」という。）の規定に違反しないものはどれか。\n1　Aは、建築工事完了前のマンションの売買契約を締結する際にBから手付金200万円を受領し、さらに建築工事中に200万円を中間金として受領した後、当該手付金と中間金について法第41条に定める保全措置（手付金等の保全：保険・保証など）を講じた。\n2　Aは、建築工事完了後のマンションの売買契約を締結する際に、法第41条の2に定める保全措置（手付金等の保全：完成物件側のルール）を講じることなくBから手付金400万円を受領した。\n3　Aは、建築工事完了前のマンションの売買契約を締結する際にBから手付金500万円を受領したが、Bに債務不履行（約束違反）がないにもかかわらず当該手付金500万円を返還して、契約を一方的に解除した。\n4　Aは、建築工事完了後のマンションの売買契約を締結する際に、当事者の債務の不履行を理由とする契約の解除に伴う損害賠償の予定額を1,000万円とする特約を定めた。",
    everyday:
      "不動産会社Aが売主で、一般の買主Bに売るときのルール（手付金の保全とか、解除・違約金の上限とか）で、違反じゃないのはどれ？という問題です。",
    options: ["1　（上記1）", "2　（上記2）", "3　（上記3）", "4　（上記4）"],
    answer: 2,
    explanation:
      "正解：2。\n判断軸：\n1：未完成物件は『一定額を超えて受け取る前に』保全措置が必要。受け取った後に保全は順番が逆でNG。\n2：完成後の手付金400万＝代金4,000万の10％。完成後は原則『10％以下（または一定額以下）なら保全不要』の扱いになるため、違反しない。\n3：売主側からの一方的解除は、手付解除のルール（相手が履行に着手する前など）に沿ってないとダメ。ここは書きぶり上、適法にできる解除としては成立しない扱いでNG。\n4：損害賠償予定額（違約金）には上限（代金の20％まで）がある。1,000万は4,000万の25％で上限超え＝NG。"
  },

  {
    id: 33,
    question:
      "【問33】宅地建物取引業者A（不動産会社A）が行う業務に関する次の記述のうち、宅地建物取引業法（宅建業法：不動産屋のルール）の規定によれば、誤っているものはいくつあるか。なお、この問において「37条書面」とは、同法第37条の規定により交付すべき書面（契約書面：契約内容を書いた書面）をいうものとする。\nア　建物の賃貸借の媒介（賃貸の仲介）をするAは、当該建物の引渡しの時期について、重要事項説明書（35条書面：重要事項の説明書）に記載して説明する必要はないが、37条書面には記載しなければならない。\nイ　Aは、自ら売主として建物を売却する場合、重要事項説明書に記載しなければならない契約の解除に関する事項については、契約に定めがなくても37条書面に全て記載しなければならない。\nウ　Aは、売主を代理して、抵当権（ローン担保）が登記されている建物を売却する場合、買主に交付する37条書面だけでなく、売主に交付する37条書面についても、当該抵当権の内容を記載しなければならない。\nエ　建物の賃貸借の媒介（賃貸の仲介）をするAは、37条書面を交付するに当たり、宅地建物取引士（宅建士）をして、その内容を説明させなければならない。",
    everyday:
      "契約のときの書類（35条の重要事項説明書と、37条の契約書面）について、ア〜エで“間違い”がいくつあるかを数える問題です。",
    options: ["1　一つ", "2　二つ", "3　三つ", "4　四つ"],
    answer: 3,
    explanation:
      "正解：3（三つ）。\n判断軸（ざっくり）：\nア：賃貸でも『引渡し時期』は重要事項説明（35条）側でもポイントになり得る。『35条は不要』は誤り扱い。\nイ：37条書面は“契約内容を書面化”なので、契約に定めがない解除事項まで“全部”は書けない（書く根拠がない）→誤り。\nウ：37条書面は相手方（当事者）双方に交付する趣旨。売主にも交付する37条書面に、抵当権など重要な権利関係を記載させるのは正しい。\nエ：37条書面は『交付』が義務で、内容説明を宅建士に“させなければならない”までは要求されない →誤り。"
  },

  {
    id: 34,
    question:
      "【問34】宅地建物取引業の免許（免許：不動産屋として営業する許可）に関する次の記述のうち、宅地建物取引業法（宅建業法：不動産屋のルール）の規定によれば、正しいものはいくつあるか。\nア　A社の政令で定める使用人（支店長クラス）Bは、刑法第234条（威力業務妨害）の罪により、懲役2年、執行猶予2年の刑に処せられた後、A社を退任し、新たにC社の政令で定める使用人に就任した。Bの執行猶予期間が満了していない場合に、C社が免許を申請しても、免許を受けることができない。\nイ　D社は、不正の手段により免許を取得したことによる免許の取消処分に係る聴聞（処分前の意見を聞く手続）の期日及び場所が公示された日から当該処分がなされるまでの間に、宅地建物取引業法第11条の規定による廃業の届出をした。その廃業に相当の理由がなかった場合、当該公示の日の40日前にD社の取締役を退任したEは、当該届出から5年経過しなければ、免許を申請しても免許を受けることができない。\nウ　営業に関し成年者と同一の行為能力を有しない未成年者（制限あり未成年）であるFの法定代理人（親など）であるGが、刑法第206条（現場助勢）の罪により罰金の刑に処せられていた場合、その刑の執行が終わった日から5年を経過していなくても、Fは免許を申請すれば免許を受けることができる。\nエ　H社の政令で定める使用人Jは、裁判所へJ自身の破産申し立てを行った後、H社を退任し、裁判所から破産手続の開始決定を受けるまでの間に、新たにK社の政令で定める使用人に就任した。その後、Jが復権（破産の資格制限が外れる）を得た場合、その日から5年を経過しなくても、K社が免許を申請すれば、免許を受けることができる。",
    everyday:
      "免許が取れないパターン（欠格：ダメ条件）に当たるかどうかを、ア〜エで数える問題です。",
    options: ["1　一つ", "2　二つ", "3　三つ", "4　四つ"],
    answer: 3,
    explanation:
      "正解：3（三つ）。\n判断軸：『役員・政令使用人・法定代理人』に欠格事由があると免許が取れない（会社も個人もアウト）。\nア：政令使用人が執行猶予中＝欠格に当たりやすく、免許不可 →正しい。\nイ：聴聞の公示後に“逃げ廃業”みたいな届出（相当理由なし）だと、一定期間、関係者（退任役員など）も欠格扱いになる →正しい。\nウ：制限あり未成年は法定代理人の欠格が強く影響する。法定代理人Gが罰金刑で一定期間内なら免許不可になり得るので、『免許を受けられる』は誤り。\nエ：破産は“復権”で欠格が解ける。復権後は5年待たずにOKの扱いなので正しい。"
  },

  {
    id: 35,
    question:
      "【問35】宅地建物取引業者A（甲県知事免許）の営業保証金（トラブル時の弁済に充てるお金）に関する次の記述のうち、宅地建物取引業法（宅建業法：不動産屋のルール）の規定によれば、正しいものはどれか。なお、Aは宅地建物取引業保証協会（保証協会：弁済業務保証金分担金制度の団体）の社員ではないものとする。\n1　免許の有効期間満了の際、Aが営業保証金を取り戻そうとする場合には、供託した営業保証金につき還付を受ける権利を有する者に対し、6か月を下らない一定期間内に申し出るべき旨を官報に公告しなければならない。\n2　Aが営業保証金を供託する場合において、金銭と有価証券を併用して供託することができるが、従たる事務所を設置したときの営業保証金については、金銭のみをもって供託しなければならない。\n3　Aは、事業の開始後新たに乙県に従たる事務所を設置したときは、従たる事務所の最寄りの供託所に営業保証金を供託し、その供託物受入の記載のある供託書の写しを添付して、その旨を甲県知事に届け出なければならない。\n4　Aの設置した支店においてAと宅地建物取引業に関する取引をした者は、その取引により生じた債権に関し、500万円を限度としてその債権の弁済を受ける権利を有する。",
    everyday:
      "保証協会に入ってない不動産会社Aが、営業保証金のルールで正しいのはどれ？という問題です。",
    options: ["1　（上記1）", "2　（上記2）", "3　（上記3）", "4　（上記4）"],
    answer: 1,
    explanation:
      "正解：1。\n判断軸：営業保証金を取り戻すには“公告して請求できる人を募る”手続がいる。\n2：従たる事務所分も有価証券での供託が可能なので『金銭のみ』は誤り。\n3：供託先や届出先の整理がズレる（主たる免許権者への手続など）ため誤り扱い。\n4：営業保証金で弁済を受けられる上限は“支店ごと500万”という形ではない（基準が違う）ため誤り。"
  },

  {
    id: 36,
    question:
      "【問36】宅地建物取引業者A（不動産会社A）の業務に関する次の記述のうち、宅地建物取引業法（宅建業法：不動産屋のルール）の規定によれば、禁止されているものはいくつあるか。\nア　Aの従業者は、電話によりBに投資用マンションの購入の勧誘（営業の声かけ）を行った際、Bから「Aから購入する意思は一切無いので、今後電話を含め勧誘はしないでほしい。」と告げられたが、その翌日、Bに対し、再度の勧誘を行った。\nイ　建物の購入希望者から「契約の締結についてしばらく考えさせてほしい。」という申し出があったので、Aの従業者は、他に買い手がいないにもかかわらず、「他に買い手がいるので、今日中しか契約の締結はできない。」と当該購入希望者に告げた。\nウ　Aの従業者は、建物の購入希望者に対して、長時間にわたり契約の締結をするための勧誘を行い、当該購入希望者を困惑（しんどくして判断できない状態）させた。\nエ　建物の売買を媒介（仲介）しているAの従業者は、手持ち資金がない購入希望者に対して「手付金（契約時に払うお金）は当社が貸し付けるので後から返してくれれば構わない。」と告げて、契約の締結を誘引（契約する気にさせる）したが、契約には至らなかった。",
    everyday:
      "不動産会社の営業で“やったらアカン”が、ア〜エに何個あるかを数える問題です。",
    options: ["1　一つ", "2　二つ", "3　三つ", "4　四つ"],
    answer: 4,
    explanation:
      "正解：4（四つ＝全部禁止）。\n判断軸：\nア：『もう勧誘するな』と言われたのに再勧誘＝再勧誘の禁止。\nイ：ウソで焦らせる（他に買い手がいる等の虚偽）＝不実告知（ウソ説明）で禁止。\nウ：長時間で困惑させる＝困惑させる行為の禁止。\nエ：手付金を貸し付けて契約を誘う＝手付金等の貸付けによる誘引の禁止（契約に至らなくても行為自体がアウト）。"
  },

  {
    id: 37,
    question:
      "【問37】宅地建物取引業者が行う宅地建物取引業法第35条（重要事項説明：契約前に大事な点を説明する）に規定する重要事項の説明に関する次の記述のうち、正しいものはどれか。なお、説明の相手方は宅地建物取引業者ではないものとする。\n1　建物の貸借の媒介（賃貸の仲介）を行う場合、当該建物が都市計画法の準防火地域（火災対策の地域）内にあり、建築基準法第61条第1項に基づく建物の構造に係る制限があるときは、その概要を説明しなければならない。\n2　マンションの分譲（売る）を行う場合、建物の区分所有等に関する法律第2条第3項に規定する専用部分（各部屋）の用途その他の利用の制限に関する規約（マンションのルール）の定めが案の段階であるときは、説明する必要はない。\n3　建物の貸借の媒介（賃貸の仲介）を行う場合、借賃（家賃）以外に授受される金銭（礼金・保証金など）の額、授受の目的及び保管方法を説明しなければならない。\n4　鉄筋コンクリート造の既存の共同住宅の販売を行う場合、宅地建物取引業法第34条の2第1項第4号に規定する建物状況調査（インスペクション）が1年6か月前に実施されたときは、建物状況調査を実施したこと、その結果の概要について説明しなくてはならない。",
    everyday:
      "契約前に説明しないといけない“重要事項”の話です。4つのうち、正しいのはどれ？です。",
    options: ["1　（上記1）", "2　（上記2）", "3　（上記3）", "4　（上記4）"],
    answer: 4,
    explanation:
      "正解：4。\n判断軸：重要事項説明は『買う/借りる判断に直結する情報』を説明する。\n4：建物状況調査（インスペクション）は“実施の有無・結果概要”が重要事項として説明対象。\n1：準防火地域の“構造制限”は、賃貸の重要事項としての扱いが問題文の形では正解にならない。\n2：規約が案でも、利用制限に関わるなら説明対象になり得るので『不要』は危険。\n3：借賃以外の金銭の額・目的等は重要だが、問の正解は4。"
  },

  {
    id: 38,
    question:
      "【問38】宅地建物取引業者A（不動産会社A）が行う業務に関する次の記述のうち、宅地建物取引業法（宅建業法：不動産屋のルール）の規定によれば、誤っているものはいくつあるか。\nア　Aは、宅地又は建物の売買に関する広告をする際に取引態様（自社が売主か仲介か等）の別を明示した場合、当該広告を見た者から売買に関する注文（問い合わせ・申込み）を受けたときは、改めて取引態様の別を明示する必要はない。\nイ　Aは、宅地の売買に関する広告をするに当たり、当該宅地の形質（性質・状態）について、実際のものよりも著しく優良であると人を誤認させる表示をした場合、当該宅地に関する注文がなく、売買が成立しなかったときであっても、監督処分（業務停止など）及び罰則の対象となる。\nウ　Aは、複数の区画がある宅地の売買について、数回に分けて広告をする予定でいる場合、最初に行う広告に取引態様の別を明示すれば足り、それ以降は明示する必要はない。\nエ　Aは、建物の貸借の媒介（賃貸の仲介）において、依頼者の依頼によらない広告（勝手広告）をした場合、国土交通大臣の定める報酬限度額（上限の仲介手数料）となる媒介報酬のほか、当該広告の料金に相当する額を受領できる。",
    everyday:
      "広告のルール（取引態様の表示、ウソ広告の処分、広告費を別でもらえる条件）について、ア〜エで“間違い”が何個か数える問題です。",
    options: ["1　一つ", "2　二つ", "3　三つ", "4　四つ"],
    answer: 3,
    explanation:
      "正解：3（三つ）。\n判断軸：\nア：広告で取引態様を明示しても、取引に入る場面で改めて明示が必要になることがあるので『不要』は誤り。\nイ：誇大広告・不実広告は、成約しなくても“表示した時点”で処分・罰則対象になり得る →正しい。\nウ：広告はその都度、取引態様の明示が必要。最初だけでOKは誤り。\nエ：依頼者の依頼によらない広告は、原則として広告費を別で請求できない（一定の条件で依頼がある場合に限る）ので誤り。"
  },

  {
    id: 39,
    question:
      "【問39】宅地建物取引業者A（不動産会社A）が、BからB所有の中古住宅の売却について媒介（仲介）の依頼を受けた場合における次の記述のうち、宅地建物取引業法（宅建業法：不動産屋のルール）（以下この問において「法」という。）の規定によれば、正しいものはどれか。\n1　AがBとの間で専属専任媒介契約（1社だけで仲介＋自己発見取引も原則不可）を締結し、Bから「売り出し中であることを秘密にしておきたいので指定流通機構（レインズ）への登録はしないでほしい」旨の申出があった場合、Aは、そのことを理由に登録をしなかったとしても法に違反しない。\n2　Aは、Bとの間で有効期間を1か月とする専属専任媒介契約を締結する際、「Bが媒介契約を更新する旨を申し出ない場合は、有効期間満了により自動更新するものとする」旨の特約は有効である。\n3　AがBと一般媒介契約（複数社OK）を締結したときは、法第34条の2第1項の規定に基づき交付すべき書面に、宅地建物取引士（宅建士）をして記名させなければならない。\n4　AがBとの間で専属専任媒介契約を締結した場合、Aは、当該中古住宅の取引の申込みの受付に関する状況を指定流通機構（レインズ）に登録しなければならない。",
    everyday:
      "媒介契約（一般・専任・専属専任）とレインズ登録・報告義務の話です。正しいのはどれ？です。",
    options: ["1　（上記1）", "2　（上記2）", "3　（上記3）", "4　（上記4）"],
    answer: 4,
    explanation:
      "正解：4。\n判断軸：専属専任は“レインズ登録＋業務処理状況の報告（申込み受付状況など）”が重い。\n1：専属専任は原則レインズ登録が義務。『秘密にしたい』だけで登録しないのはNG。\n2：媒介契約の自動更新はトラブルの元で、原則は期間満了で終了（更新は改めて合意）が基本。よって誤り。\n3：34条の2の書面（媒介契約書面）は、宅建士の記名押印を必須とする性質ではないため誤り。\n4：専属専任は、申込み受付状況等をレインズに登録（または報告）する義務がある →正しい。"
  },

  {
    id: 40,
    question:
      "【問40】宅地建物取引業者A（不動産会社A）が、自ら売主として、宅地建物取引業者B（不動産会社B）の媒介（仲介）により、宅地建物取引業者ではない買主C（一般の買主）との間で宅地の売買契約を締結した場合、宅地建物取引業法第37条の2（クーリング・オフ：一定条件なら8日以内に解除できる） の規定に基づくいわゆるクーリング・オフに関する次の記述のうち、正しいものはいくつあるか。\nア　Cは、Bの事務所で買受けの申込みを行い、その3日後に、Cの自宅近くの喫茶店で売買契約を締結した場合、クーリング・オフによる契約の解除はできない。\nイ　AとCの間で、クーリング・オフによる契約の解除に関し、Cは契約の解除の書面をクーリング・オフの告知の日から起算して8日以内にAに到達させなければ契約を解除することができない旨の特約を定めた場合、当該特約は無効である。\nウ　Cは、Bからの提案によりCの自宅で買受けの申込みを行ったが、クーリング・オフについては告げられず、その10日後に、Aの事務所で売買契約を締結した場合、クーリング・オフによる契約の解除はできない。\nエ　クーリング・オフについてCに告げる書面には、Aの商号又は名称及び住所並びに免許証番号を記載しなければならないが、Bの商号又は名称及び住所並びに免許証番号の記載は必要ない。",
    everyday:
      "クーリング・オフが使える条件（どこで申込み/契約したか、告知書面、8日ルール、特約の有効/無効）を、ア〜エで数える問題です。",
    options: ["1　一つ", "2　二つ", "3　三つ", "4　なし"],
    answer: 3,
    explanation:
      "正解：3（三つ）。\n判断軸：クーリング・オフは『事務所等以外で契約した場合』などに発動し、起算は“告知（書面）”が出発点。到達主義にして不利にする特約は無効になりやすい。\nア：申込みは事務所でも、契約を事務所以外（喫茶店）で結ぶとクーリング・オフの対象になり得るので、『できない』は誤り。\nイ：8日以内“到達”を要求するのは買主に不利（発信主義に反する方向）なので無効 →正しい。\nウ：告知されていないなら、原則として8日カウント自体が始まらない。『10日後だから不可』ではなく、告知がないなら使える余地が残るので、『できない』は誤り。\nエ：告知書面に、売主Aの表示だけでなく媒介業者Bの表示も必要になるため、『Bは不要』は誤り。"
  }
];

  // ====== DOM生成 ======
  const qGrid = document.getElementById("qGrid");

  function esc(s){
    return s.replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
  }

  function makeCard(q){
    const card = document.createElement("div");
    card.className = "qcard";
    card.id = `q${q.id}`;

    const head = document.createElement("div");
    head.className = "qhead";
    head.innerHTML = `<div class="qid">Q${q.id}</div><div class="tag">${esc(q.tag)}</div>`;
    card.appendChild(head);

    const bt1 = document.createElement("div");
    bt1.className = "blocktitle";
    bt1.textContent = "【問題文（試験風）】";
    card.appendChild(bt1);

    const b1 = document.createElement("div");
    b1.className = "box";
    b1.textContent = q.stem;
    card.appendChild(b1);

    const bt2 = document.createElement("div");
    bt2.className = "blocktitle";
    bt2.textContent = "【日常の言い換え】";
    card.appendChild(bt2);

    const b2 = document.createElement("div");
    b2.className = "box";
    b2.textContent = q.daily;
    card.appendChild(b2);

    const bt3 = document.createElement("div");
    bt3.className = "blocktitle";
    bt3.textContent = "【選択肢】（1つ選ぶ）";
    card.appendChild(bt3);

    const choices = document.createElement("div");
    choices.className = "choices";

    q.choices.forEach((c, idx) => {
      const label = String.fromCharCode(65 + idx); // A,B,C,D
      const row = document.createElement("label");
      row.className = "choice";
      row.innerHTML = `
        <input type="radio" name="q_${q.id}" value="${idx}" />
        <div class="cbody">
          <span class="clabel">${label}</span>
          <span>${esc(c)}</span>
        </div>
      `;
      choices.appendChild(row);
    });
    card.appendChild(choices);

    const res = document.createElement("div");
    res.className = "result";
    res.id = `res_${q.id}`;
    res.innerHTML = `
      <div class="line1"></div>
      <div class="small"></div>
    `;
    card.appendChild(res);

    return card;
  }

  questions.forEach(q => qGrid.appendChild(makeCard(q)));

  // ====== 状態管理 ======
  const KEY_SAVE = "takkenset_te-tsuke_mix_v1";
  let scored = false;

  function getSelected(qid){
    const el = document.querySelector(`input[name="q_${qid}"]:checked`);
    return el ? Number(el.value) : null;
  }
  function setSelected(qid, val){
    const el = document.querySelector(`input[name="q_${qid}"][value="${val}"]`);
    if(el) el.checked = true;
  }
  function clearSelected(qid){
    const els = document.querySelectorAll(`input[name="q_${qid}"]`);
    els.forEach(e => e.checked = false);
  }

  function countUnanswered(){
    let n = 0;
    questions.forEach(q => { if(getSelected(q.id) === null) n++; });
    return n;
  }

  function updateStats(){
    const unanswered = countUnanswered();
    document.getElementById("statSub").textContent = `未回答：${unanswered} / ${questions.length}`;
    if(!scored){
      document.getElementById("statText").textContent = `合計：${questions.length}問中 0 正解（未採点）`;
    }
  }

  function score(){
    let correct = 0;
    questions.forEach(q => {
      const sel = getSelected(q.id);
      const res = document.getElementById(`res_${q.id}`);
      const line1 = res.querySelector(".line1");
      const small = res.querySelector(".small");

      res.style.display = "block";

      if(sel === null){
        res.classList.remove("ok","ng");
        res.classList.add("ng");
        line1.innerHTML = `未回答 <span class="pill">正解：${String.fromCharCode(65+q.answer)}</span>`;
        small.textContent = "採点後に解説を表示できます。まずはどれか1つ選んでください。";
        return;
      }

      if(sel === q.answer){
        correct++;
        res.classList.remove("ng");
        res.classList.add("ok");
        line1.innerHTML = `正解 <span class="pill">あなた：${String.fromCharCode(65+sel)}</span>`;
      }else{
        res.classList.remove("ok");
        res.classList.add("ng");
        line1.innerHTML = `不正解 <span class="pill">あなた：${String.fromCharCode(65+sel)}</span> <span class="pill">正解：${String.fromCharCode(65+q.answer)}</span>`;
      }
      small.textContent = "（解説は『解説を表示』で表示）";
    });

    scored = true;
    document.getElementById("statText").textContent = `合計：${questions.length}問中 ${correct} 正解（採点済）`;
    updateStats();
    return correct;
  }

  function showExplanations(){
    if(!scored){
      alert("先に『採点する』を押してください。");
      return;
    }
    questions.forEach(q => {
      const res = document.getElementById(`res_${q.id}`);
      const sel = getSelected(q.id);
      const small = res.querySelector(".small");
      const ansLabel = String.fromCharCode(65+q.answer);
      const yourLabel = (sel===null) ? "未回答" : String.fromCharCode(65+sel);
      small.innerHTML =
        `<div class="muted">正解：<b>${ansLabel}</b> ／ あなた：<b>${esc(yourLabel)}</b></div>` +
        `<div style="margin-top:6px;line-height:1.65">${esc(q.exp)}</div>`;
    });
  }

  function buildAnswerString(){
    const parts = questions.map(q => {
      const sel = getSelected(q.id);
      return `${q.id}=${sel===null ? "x" : sel}`;
    });
    return `v1|${parts.join(",")}`;
  }

  function applyAnswerString(str){
    const s = (str||"").trim();
    if(!s.startsWith("v1|")) throw new Error("形式が違います（v1|...）");
    const body = s.slice(3);
    const kvs = body.split(",").map(x => x.trim()).filter(Boolean);

    questions.forEach(q => clearSelected(q.id));

    kvs.forEach(kv => {
      const [k,v] = kv.split("=");
      const qid = Number(k);
      if(!Number.isFinite(qid)) return;
      const q = questions.find(x => x.id === qid);
      if(!q) return;
      if(v === "x") return;
      const val = Number(v);
      if(Number.isFinite(val) && val >= 0 && val < 4){
        setSelected(qid, val);
      }
    });

    scored = false;
    questions.forEach(q => {
      const res = document.getElementById(`res_${q.id}`);
      res.style.display = "none";
      res.classList.remove("ok","ng");
      res.querySelector(".line1").textContent = "";
      res.querySelector(".small").textContent = "";
    });
    updateStats();
    document.getElementById("statText").textContent = `合計：${questions.length}問中 0 正解（未採点）`;
  }

  function saveLocal(){
    const payload = {
      v: 1,
      ts: Date.now(),
      ans: buildAnswerString()
    };
    localStorage.setItem(KEY_SAVE, JSON.stringify(payload));
  }

  function loadLocal(){
    const raw = localStorage.getItem(KEY_SAVE);
    if(!raw) return null;
    try{
      const obj = JSON.parse(raw);
      if(!obj || !obj.ans) return null;
      return obj.ans;
    }catch(e){
      return null;
    }
  }

  function resetAll(){
    if(!confirm("全回答をリセットします。よろしいですか？")) return;
    questions.forEach(q => clearSelected(q.id));
    scored = false;
    questions.forEach(q => {
      const res = document.getElementById(`res_${q.id}`);
      res.style.display = "none";
      res.classList.remove("ok","ng");
      res.querySelector(".line1").textContent = "";
      res.querySelector(".small").textContent = "";
    });
    localStorage.removeItem(KEY_SAVE);
    document.getElementById("restoreBox").value = "";
    updateStats();
    document.getElementById("statText").textContent = `合計：${questions.length}問中 0 正解（未採点）`;
  }

  document.getElementById("btnScore").addEventListener("click", () => {
    const unanswered = countUnanswered();
    if(unanswered === questions.length){
      if(!confirm("まだ1問も選ばれていません。採点すると未回答が多く出ますが続けますか？")) return;
    }
    score();
  });

  document.getElementById("btnShowExp").addEventListener("click", () => {
    showExplanations();
  });

  document.getElementById("btnCopy").addEventListener("click", async () => {
    const s = buildAnswerString();
    try{
      await navigator.clipboard.writeText(s);
      alert("回答をコピーしました。メモに貼って保存できます。");
    }catch(e){
      document.getElementById("restoreBox").value = s;
      alert("クリップボードにコピーできなかったため、復元欄に入れました。手動でコピーしてください。");
    }
  });

  document.getElementById("btnSave").addEventListener("click", () => {
    saveLocal();
    alert("端末内に保存しました。");
  });

  document.getElementById("btnRestore").addEventListener("click", () => {
    const s = document.getElementById("restoreBox").value;
    try{
      applyAnswerString(s);
      alert("復元しました（未採点状態に戻しました）。");
    }catch(e){
      alert("復元に失敗しました： " + e.message);
    }
  });

  document.getElementById("btnReset").addEventListener("click", () => {
    resetAll();
  });

  document.addEventListener("change", (ev) => {
    if(ev.target && ev.target.matches('input[type="radio"]')){
      updateStats();
      if(scored){
        scored = false;
        document.getElementById("statText").textContent = `合計：${questions.length}問中 0 正解（未採点）`;
        questions.forEach(q => {
          const res = document.getElementById(`res_${q.id}`);
          if(res.style.display === "block"){
            res.querySelector(".small").innerHTML = `<span class="warn">※回答が変更されたため、再度『採点する』が必要です。</span>`;
          }
        });
      }
    }
  });

  const saved = loadLocal();
  if(saved){
    document.getElementById("restoreBox").value = saved;
  }

  updateStats();
})();
</script>
</body>
</html>
