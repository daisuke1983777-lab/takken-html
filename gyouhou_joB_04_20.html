<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>業法｜上B 20問（標準＋日常訳）#04 </title>
  <style>
    body{font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans JP","Hiragino Kaku Gothic ProN","Yu Gothic",sans-serif; line-height:1.6; margin:24px; color:#111;}
    h1{font-size:22px; margin:0 0 8px;}
    .sub{color:#333; margin:0 0 18px;}
    .panel{border:1px solid #ddd; padding:14px; border-radius:10px; margin:14px 0;}
    .qtitle{font-weight:800; margin:0 0 8px;}
    .sec{margin:10px 0;}
    .label{font-weight:800; font-size:13px; color:#222; margin-bottom:6px;}
    .box{background:#fafafa; border:1px solid #e6e6e6; padding:10px; border-radius:8px;}
    .choices label{display:block; padding:8px 10px; border:1px solid #eee; border-radius:10px; margin:8px 0; cursor:pointer;}
    .choices input{margin-right:10px;}
    .controls{display:flex; flex-wrap:wrap; gap:10px; margin:14px 0;}
    button{padding:10px 12px; border:1px solid #ccc; background:#fff; border-radius:10px; cursor:pointer;}
    button:hover{background:#f5f5f5;}
    .score{font-weight:900; font-size:18px;}
    .resultLine{margin-top:8px; font-weight:900;}
    .ok{color:#0b6;}
    .ng{color:#c22;}
    .explain{display:none; margin-top:10px;}
    textarea{width:100%; min-height:90px; padding:10px; border-radius:10px; border:1px solid #ccc;}
    .small{font-size:12px; color:#444;}
    .foot{margin-top:18px; color:#444; font-size:12px;}
  </style>
</head>
<body>
  <h1>業法｜上B 20問（標準＋日常訳）#04</h1>
  <p class="sub">
    表示順は固定：問題文（試験風）→ 日常の言い換え → 選択肢。<br>
    1問1択。採点後にだけ「正解＋ピンポイント解説」を表示。端末内保存（localStorage）対応。
  </p>

  <div class="controls">
    <button onclick="grade()">採点</button>
    <button onclick="copyAnswers()">回答をコピー</button>
    <button onclick="restoreAnswers()">回答を貼って復元</button>
    <button onclick="resetAll()">リセット</button>
    <div class="score" id="scoreBox">未採点</div>
  </div>

  <div class="panel">
    <div class="label">回答貼り付け欄（「回答をコピー」で出た文字列を貼る）</div>
    <textarea id="restoreArea" placeholder="ここに貼って「回答を貼って復元」"></textarea>
    <div class="small">※この欄は採点に影響しません（復元専用）。</div>
  </div>

  <div id="quiz"></div>

  <div class="foot">
    ※上B：問題はほぼ本試験レベル＋日常用語解釈あり／専門用語は（）で補足あり。<br>
    ※数字系の核：REINSは「属5（専属専任5日）／7任（専任7日）」。報告は「専属1週／専任2週」。
  </div>

<script>
const STORAGE_KEY = "takken_g_youhou_joB_04_20";

const questions = [
  {
    id: 1,
    q: "【問1】宅地建物取引業者（たっけんぎょうしゃ：不動産屋）が媒介（ばいかい：仲介）をする場合、重要事項説明（じゅうようじこうせつめい：契約前の大事な説明）は、契約締結（けいやくていけつ：契約を結ぶこと）の前までに行えばよい。",
    d: "契約を結ぶ前に、大事な説明を終えていればOK？",
    choices: ["正しい","誤り","売主のときだけ正しい","買主のときだけ正しい"],
    a: 0,
    exp: "重要事項説明（35条の説明）は『契約締結前』に行う。"
  },
  {
    id: 2,
    q: "【問2】重要事項説明書面（35条書面：大事な内容を書いた紙）は、宅地建物取引士（たっけんし：資格者）が記名押印（きめいおういん：名前＋ハンコ）し、相手方へ交付（こうふ：渡すこと）しなければならない。",
    d: "大事な説明の紙は、宅建士の名前とハンコ入りで相手に渡す必要がある？",
    choices: ["正しい","誤り","記名だけでよい（押印不要）","押印だけでよい（記名不要）"],
    a: 0,
    exp: "35条書面は、宅建士が記名押印し、交付するのが基本。"
  },
  {
    id: 3,
    q: "【問3】37条書面（さんじゅうななじょうしょめん：契約後に渡す契約内容の紙）は、必ず宅地建物取引士（宅建士）が記名押印しなければならない。",
    d: "契約後に渡す紙も、宅建士の名前とハンコが必須？",
    choices: ["正しい","誤り","売主が業者なら正しい","買主が業者なら正しい"],
    a: 1,
    exp: "37条書面は、宅建士が必ず記名押印する決まりではない（35条と混同しやすい）。"
  },
  {
    id: 4,
    q: "【問4】専任媒介契約（せんにんばいかい：他社へ同時依頼できない仲介契約）の有効期間（ゆうこうきかん：契約が効く期間）は、3か月を超える定めをしても有効である。",
    d: "専任媒介の期間を4か月にしても、そのまま有効？",
    choices: ["正しい","誤り","法人相手なら正しい","更新なら正しい"],
    a: 1,
    exp: "専任媒介の有効期間は3か月以内。3か月超は『3か月に短縮』の扱い。"
  },
  {
    id: 5,
    q: "【問5】専属専任媒介契約（せんぞくせんにん：自分で相手を見つけて直接契約（自己発見取引：じこはっけんとりひき）もできない契約）では、指定流通機構（していりゅうつうきこう：REINS/レインズ）への登録は、契約締結日から5日以内（営業日換算）に行わなければならない。",
    d: "専属専任のレインズ登録は『5営業日以内』？",
    choices: ["正しい","誤り","3日以内（営業日）が正しい","7日以内（営業日）が正しい"],
    a: 0,
    exp: "専属専任＝5日以内（営業日）。語呂は「属5」。"
  },
  {
    id: 6,
    q: "【問6】専任媒介契約では、指定流通機構（REINS）への登録は、契約締結日から7日以内（営業日換算）に行わなければならない。",
    d: "専任媒介のレインズ登録は『7営業日以内』？",
    choices: ["正しい","誤り","5日以内（営業日）が正しい","登録義務はない"],
    a: 0,
    exp: "専任＝7日以内（営業日）。語呂は「7任」。"
  },
  {
    id: 7,
    q: "【問7】専任媒介契約では、業務処理状況（ぎょうむしょりじょうきょう：何をしたかの報告）の報告は、2週間に1回以上行わなければならない。",
    d: "専任媒介は『2週間に1回以上の報告』が必要？",
    choices: ["正しい","誤り","1週間に1回以上が正しい","報告義務はない"],
    a: 0,
    exp: "報告は、専任＝2週間に1回以上、専属専任＝1週間に1回以上。"
  },
  {
    id: 8,
    q: "【問8】一般媒介契約（いっぱんばいかい：他社へ同時依頼できる仲介契約）であっても、指定流通機構（REINS）への登録義務がある。",
    d: "一般媒介でも、レインズ登録は必ず必要？",
    choices: ["正しい","誤り","売主からの依頼なら正しい","買主からの依頼なら正しい"],
    a: 1,
    exp: "REINS登録義務は、専任・専属専任のみ。一般媒介は義務なし（任意）。"
  },
  {
    id: 9,
    q: "【問9】媒介契約の更新（こうしん：同じ契約を続けること）は、依頼者の申出（もうしで：言い出し）がなくても自動更新（じどうこうしん）とする特約（とくやく：特別な約束）を定めることができる。",
    d: "仲介契約は、勝手に自動更新にしていい？",
    choices: ["正しい","誤り","一般媒介だけ自動更新OK","専任媒介だけ自動更新OK"],
    a: 1,
    exp: "媒介契約の更新は、依頼者の申出が必要。自動更新特約は不可。"
  },
  {
    id: 10,
    q: "【問10】宅建業者が受け取る報酬（ほうしゅう：仲介手数料など）は、国土交通大臣（こくどこうつうだいじん）の定める限度額（げんどがく：上限）を超えて受領（じゅりょう：もらうこと）してはならない。",
    d: "仲介手数料は、国の上限を超えて取ったらダメ？",
    choices: ["正しい","誤り","売買だけ上限あり（賃貸は自由）","賃貸だけ上限あり（売買は自由）"],
    a: 0,
    exp: "報酬（仲介手数料など）は限度額（上限）が決まっており、超えて受領は不可。"
  },
  {
    id: 11,
    q: "【問11】広告（こうこく：宣伝）で「必ず値上がりする」など、断定的判断（だんていてきはんだん：言い切り）を提供することは禁止される。",
    d: "広告で『絶対上がる』みたいに言い切るのはダメ？",
    choices: ["正しい","誤り","自ら売主ならOK","相手が業者ならOK"],
    a: 0,
    exp: "断定的判断の提供は禁止。"
  },
  {
    id: 12,
    q: "【問12】クーリング・オフ（一定条件で無条件解除できる制度）は、申込み又は契約が事務所以外で行われた場合は、常に適用される。",
    d: "事務所以外で契約したら、いつでもクーリングオフできる？",
    choices: ["正しい","誤り","買主が個人なら常に適用","売主が業者なら常に適用"],
    a: 1,
    exp: "場所だけで常に適用ではない。買主が自ら申し出て出向いた場所など、適用されない場面がある。"
  },
  {
    id: 13,
    q: "【問13】宅建業者が自ら売主（じらうりぬし：自分が売る側）となる売買では、手付金等（てつけきんなど）の額は、代金の2割を超えて受領してはならない。",
    d: "業者が自分で売るとき、手付金を代金の2割より多く取ったらダメ？",
    choices: ["正しい","誤り","1割が上限","上限はない"],
    a: 0,
    exp: "自ら売主の制限（いわゆる8種制限）：手付金等は代金の2割が上限。"
  },
  {
    id: 14,
    q: "【問14】宅建業者が自ら売主となる売買では、損害賠償の予定額（そんがいばいしょうのよていがく：違約金などの上限を事前に決めること）は、代金の2割を超える定めをしてはならない。",
    d: "業者売主のとき、違約金の上限を代金の2割より大きく決めたらダメ？",
    choices: ["正しい","誤り","3割までOK","上限は1割"],
    a: 0,
    exp: "自ら売主の制限：損害賠償予定額（違約金など）は代金の2割が上限。"
  },
  {
    id: 15,
    q: "【問15】宅建業者が自ら売主となる売買では、契約不適合責任（けいやくふてきごうせきにん：欠陥や説明と違う責任）について、引渡しから1年以上とする特約（とくやく）は有効である。",
    d: "業者売主のとき、欠陥の責任を『引渡しから1年以上』にする約束はOK？",
    choices: ["正しい","誤り","2年以上でないとダメ","6か月以上ならOK"],
    a: 0,
    exp: "自ら売主の場合、契約不適合責任は『引渡しから2年以上』の特約でないとダメ。1年以上は短いので無効。"
  },
  {
    id: 16,
    q: "【問16】宅地建物取引士証（たっけんししょう：宅建士の身分証）は、相手方から求められた場合に限り提示（ていじ：見せること）すればよい。",
    d: "宅建士の証明書は、相手に言われた時だけ見せればOK？",
    choices: ["正しい","誤り","求められなくても提示が必要","契約後に提示すればよい"],
    a: 2,
    exp: "取引士証は、重要事項説明の際、求められなくても提示が必要。"
  },
  {
    id: 17,
    q: "【問17】従業者証明書（じゅうぎょうしゃしょうめい：社員の身分証）は、従業者が携帯（けいたい：持ち歩くこと）し、相手方から求められたときは提示しなければならない。",
    d: "社員の身分証は持ち歩き必須で、言われたら見せないとダメ？",
    choices: ["正しい","誤り","携帯義務はない","提示義務はない"],
    a: 0,
    exp: "従業者証明書は携帯義務があり、請求があれば提示が必要。"
  },
  {
    id: 18,
    q: "【問18】免許（めんきょ：営業の許可）について、事務所を2以上の都道府県に置く場合は、国土交通大臣免許（だいじんめんきょ）が必要になる。",
    d: "事務所が複数県にまたがるなら、大臣免許が必要？",
    choices: ["正しい","誤り","支店だけなら不要","現場事務所なら不要"],
    a: 0,
    exp: "2以上の都道府県に事務所を置く場合は、原則として大臣免許。"
  },
  {
    id: 19,
    q: "【問19】保証協会（ほしょうきょうかい：弁済業務保証金制度の団体）に加入している宅建業者は、営業保証金（えいぎょうほしょうきん：法務局へ供託するお金）を供託（きょうたく：預ける）しなければ営業できない。",
    d: "保証協会に入ってても、営業保証金を法務局に預けないと営業できない？",
    choices: ["正しい","誤り","保証協会に入っていれば営業保証金は不要","保証協会は個人業者は入れない"],
    a: 1,
    exp: "保証協会加入なら、営業保証金の供託ではなく『弁済業務保証金分担金』側で対応する（営業保証金は不要）。"
  },
  {
    id: 20,
    q: "【問20】監督処分（かんとくしょぶん：指示・業務停止・免許取消など行政処分）は、刑事罰（けいじばつ：罰金や懲役）とは別に科される（かされる：課される）ことがある。",
    d: "行政の処分（業務停止とか）と、罰金とかは別々に来ることがある？",
    choices: ["正しい","誤り","どちらか一方しか来ない","免許取消なら刑事罰はない"],
    a: 0,
    exp: "行政処分（監督処分）と刑事罰は性質が別。併科（へいか：両方）されることがある。"
  }
];

// 生成
const quizEl = document.getElementById("quiz");

function loadSaved(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY);
    if(!raw) return {};
    return JSON.parse(raw);
  }catch(e){ return {}; }
}
function saveAnswers(map){
  localStorage.setItem(STORAGE_KEY, JSON.stringify(map));
}

function render(){
  const saved = loadSaved();
  quizEl.innerHTML = "";
  questions.forEach((x, idx) => {
    const wrap = document.createElement("div");
    wrap.className = "panel";
    wrap.id = "qwrap_" + x.id;

    wrap.innerHTML = `
      <div class="qtitle">Q${String(idx+1).padStart(2,"0")}</div>

      <div class="sec">
        <div class="label">問題文（試験風）</div>
        <div class="box">${escapeHtml(x.q)}</div>
      </div>

      <div class="sec">
        <div class="label">日常の言い換え</div>
        <div class="box">${escapeHtml(x.d)}</div>
      </div>

      <div class="sec choices" role="radiogroup" aria-label="choices">
        <div class="label">選択肢（1つ選ぶ）</div>
        ${x.choices.map((c,i)=>`
          <label>
            <input type="radio" name="q_${x.id}" value="${i}" onchange="onPick(${x.id}, ${i})">
            ${escapeHtml((i+1)+"．"+c)}
          </label>
        `).join("")}
      </div>

      <div class="resultLine" id="res_${x.id}"></div>
      <div class="box explain" id="exp_${x.id}"></div>
    `;

    quizEl.appendChild(wrap);

    if(saved[String(x.id)] !== undefined){
      const v = saved[String(x.id)];
      const input = wrap.querySelector(\`input[name="q_\${x.id}"][value="\${v}"]\`);
      if(input) input.checked = true;
    }
  });
}

function onPick(qid, val){
  const saved = loadSaved();
  saved[String(qid)] = Number(val);
  saveAnswers(saved);
}

function grade(){
  const saved = loadSaved();
  let correct = 0;

  questions.forEach((x) => {
    const picked = saved[String(x.id)];
    const resEl = document.getElementById("res_"+x.id);
    const expEl = document.getElementById("exp_"+x.id);

    if(picked === undefined){
      resEl.textContent = "未回答";
      resEl.className = "resultLine ng";
      expEl.style.display = "none";
      return;
    }

    const ok = (Number(picked) === x.a);
    if(ok) correct++;

    resEl.textContent = ok ? \`正解（あなた：\${Number(picked)+1}）\` : \`不正解（あなた：\${Number(picked)+1}／正解：\${x.a+1}）\`;
    resEl.className = "resultLine " + (ok ? "ok" : "ng");
    expEl.innerHTML = \`<b>正解</b>：\${x.a+1}<br><b>ピンポイント解説</b><br>\${escapeHtml(x.exp)}\`;
    expEl.style.display = "block";
  });

  document.getElementById("scoreBox").textContent = \`スコア：\${correct} / \${questions.length}\`;
}

function copyAnswers(){
  const saved = loadSaved();
  const parts = questions.map(x=>{
    const v = saved[String(x.id)];
    return \`\${x.id}=\${(v===undefined) ? "" : (Number(v)+1)}\`;
  });
  const text = \`TAKKEN_\${STORAGE_KEY}::\` + parts.join(";");

  navigator.clipboard?.writeText(text).then(()=>{
    alert("コピーしました。");
  }).catch(()=>{
    const ta = document.getElementById("restoreArea");
    ta.value = text;
    ta.focus();
    ta.select();
    alert("自動コピーできない環境です。下の欄に文字列を入れたので、手動でコピーしてください。");
  });
}

function restoreAnswers(){
  const ta = document.getElementById("restoreArea");
  const text = (ta.value || "").trim();
  if(!text){
    alert("貼り付け文字列が空です。");
    return;
  }
  if(!text.startsWith("TAKKEN_"+STORAGE_KEY+"::")){
    alert("このセット用の文字列ではありません（キー不一致）。");
    return;
  }
  const body = text.split("::")[1] || "";
  const pairs = body.split(";").filter(Boolean);

  const next = {};
  pairs.forEach(p=>{
    const [k,v] = p.split("=");
    if(!k) return;
    const qid = String(k).trim();
    if(v === undefined || v === "") return;
    const n = Number(v);
    if(Number.isFinite(n) && n>=1 && n<=4){
      next[qid] = n-1;
    }
  });

  const saved = loadSaved();
  Object.keys(next).forEach(k=> saved[k] = next[k]);
  saveAnswers(saved);
  render();
  alert("復元しました。");
}

function resetAll(){
  if(!confirm("端末内保存の回答も含めて全リセットします。よろしいですか？")) return;
  localStorage.removeItem(STORAGE_KEY);
  document.getElementById("restoreArea").value = "";
  document.getElementById("scoreBox").textContent = "未採点";
  render();
}

function escapeHtml(s){
  return String(s)
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#039;")
    .replaceAll("\n","<br>");
}

render();
</script>
</body>
</html>
